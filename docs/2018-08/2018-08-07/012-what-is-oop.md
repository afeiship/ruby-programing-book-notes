# 面向对象

## 1.对象是什么
包括 Ruby 在内，世界上有多种面向对象的程序设计语言。
不同的语言，不仅语法不一样，功能也千差万别，但它们几乎都有一个共通点，就是将程序处理的主体作为“对象”来考虑。

一般情况下，程序语言的处理主体是数据。之前提到的数值、字符串、数组等都是简单的数据。

而面向对象的语言中的“对象”就是指数据(或者说数据的集合)及操作该数据的方法的组合。
之前我们提到过 Ruby 里的数值 3.14 是 Float 类的实例。这个 3.14 不仅是表示 3.14 这个数值的数据，还包括与数值相关的操作方法。

## 2.面向对象的特征
+ 封装
```conf
所谓封装(encapsulation)，就是指使对象管理的数据不能直接从外部进行操作，数据的更新、查询等操作都必须通过调用对象的方法来完成。通过封 装，可以防止因把非法数据设置给对象而使程序产生异常的情况发生。

Ruby 对象在默认情况下是强制被封装的，因此无法从外部直接访问 Ruby 对象的实例变量。虽然有像 attr_accessor(8.2.4 节)这样简单定义访问级 别的方法，但也不要过度使用，建议只在需要公开时才使用。

封装的另外一个好处就是，可以隐藏对象内部数据处理的具体细节，把内部逻辑抽象地表现出来。例如，通过使用 Time 类，就可以进行从系统获取当 前时间、从时间里提取年月日等操作。

```

```rb
t = Time.now    # 从系统获取当前时间
p t.year        #=> 2013(从时间里提取年)
```
+ 多态
```conf
对象是数据及其处理的组合。对象知道数据是怎样被处理的。
换句话说，各个对象都有自己独有的消息解释权。
一个方法名属于多个对象(不同对象的
处理结果也不一样)这种现象，用面向对象的术语来说，就是多态(polymorphism)。
```

```rb
obj = Object.new 
str = "Ruby"
num = Math::PI  
p obj.to_s 
p str.to_s 
p num.to_s

# to_s 方法属于多个对象，每个对象都有他们对 to_s 各自的实现，即各自的 消息解释权
# 对象(Object)
# 字符串(String) # 数值(Float)
#=> "#<Object:0x07fa1d6bd1008>" #=> "Ruby"
#=> "3.141592653589793"
```
> 三者的 to_s 方法名一样，含义也都是“以可以显示的形式把数据转换为字符串”，但实际的字符串转换方式却因对象而异(图 8.10)。String 类和 Float 类都是继承自 Object 类，也都重新定义了从 Object 类继承的 to_s 方法，并提供了更适合自己语义的 to_s 方法。

![](https://ws3.sinaimg.cn/large/0069RVTdgy1fu12c7x6uyj31kw0ktwjm.jpg)